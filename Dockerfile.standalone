FROM python:3.12-slim

WORKDIR /app

# Устанавливаем только необходимые зависимости
RUN pip install --no-cache-dir fastapi uvicorn pyTelegramBotAPI

# Копируем ТОЛЬКО standalone файл
COPY standalone_webhook.py .

ENV PYTHONUNBUFFERED=1

EXPOSE $PORT

# Запускаем standalone сервер
CMD python -m uvicorn standalone_webhook:app --host 0.0.0.0 --port $PORT